<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<body>

<!-- МОДАЛЬНОЕ ОКНО ДЛЯ РЕДАКТИРОВАНИЯ ID -->
<div class="modal fade" id="editIdsModal" tabindex="-1" aria-labelledby="editIdsModalLabel" aria-hidden="true"
        th:fragment="edit-ids-modal(player)">
    <div class="modal-dialog">
        <div class="modal-content">
            <form id="update-ids-form">
                <div class="modal-header">
                    <h5 class="modal-title" id="editIdsModalLabel">Редактировать ID</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="gomafiaId" class="form-label">Gomafia ID</label>
                        <input type="number" id="gomafiaId" name="gomafiaId" class="form-control"
                                th:value="${player.gomafiaId}">
                    </div>
                    <div class="mb-3">
                        <label for="polemicaId" class="form-label">Polemica ID</label>
                        <input type="number" id="polemicaId" name="polemicaId" class="form-control"
                                th:value="${player.polemicaId}">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Отмена</button>
                    <button type="submit" class="btn btn-primary">Сохранить</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- МОДАЛЬНОЕ ОКНО ДЛЯ РЕДАКТИРОВАНИЯ НИКНЕЙМА -->
<div class="modal fade" id="editNicknameModal" tabindex="-1" aria-labelledby="editNicknameModalLabel" aria-hidden="true"
        th:fragment="edit-nickname-modal(player)">
    <div class="modal-dialog">
        <div class="modal-content">
            <form id="update-nickname-form">
                <div class="modal-header">
                    <h5 class="modal-title" id="editNicknameModalLabel">Редактировать никнейм</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="customNickname" class="form-label">Пользовательский никнейм</label>
                        <input type="text" id="customNickname" name="customNickname" class="form-control"
                                th:value="${player.customNickname}"
                                placeholder="Оставьте пустым для использования никнейма из внешнего сервиса">
                        <small class="form-text text-muted">Если оставить пустым, будет использоваться никнейм из
                            внешнего сервиса</small>
                    </div>
                    <div class="mb-3">
                        <p class="mb-1"><strong>Никнейм из внешнего сервиса:</strong></p>
                        <p class="text-muted" th:text="${player.nickname}"></p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Отмена</button>
                    <button type="button" class="btn btn-warning" id="clearNicknameButton"
                            th:if="${player.customNickname}">
                        <i class="fa-solid fa-eraser me-1"></i> Очистить
                    </button>
                    <button type="submit" class="btn btn-primary">Сохранить</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- МОДАЛЬНОЕ ОКНО ДЛЯ ЗАГРУЗКИ НОВОГО ФОТО -->
<div class="modal fade" id="uploadPhotoModal" tabindex="-1" aria-labelledby="uploadPhotoModalLabel"
        aria-hidden="true" th:fragment="upload-photo-modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <form id="upload-photo-form" enctype="multipart/form-data">
                <div class="modal-header">
                    <h5 class="modal-title" id="uploadPhotoModalLabel">Загрузить новое фото</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="photoType" class="form-label">Тип фото</label>
                        <select id="photoType" name="photoType" class="form-select" required>
                            <option th:each="type : ${T(com.stoum.overlay.entity.enums.PhotoType).values()}"
                                    th:value="${type}"
                                    th:text="${type}"></option>
                        </select>
                    </div>
                    <p class="text-muted small mt-3">Для фото, привязанного к турниру, заполните поля ниже.</p>
                    <div class="mb-3">
                        <label for="tournamentType" class="form-label">Источник турнира</label>
                        <select id="tournamentType" name="tournamentType" class="form-select">
                            <option value="">-- Без турнира --</option>
                            <option th:each="type : ${T(com.stoum.overlay.entity.enums.GameType).values()}"
                                    th:value="${type}"
                                    th:text="${type}"></option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="tournamentId" class="form-label">ID турнира</label>
                        <input type="number" id="tournamentId" name="tournamentId" class="form-control">
                    </div>
                    <hr>
                    <div class="mb-3">
                        <label for="photoFile" class="form-label">Файл изображения</label>
                        <input type="file" id="photoFile" name="photo" class="form-control" accept="image/*"
                                required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Отмена</button>
                    <button type="submit" class="btn btn-success">Загрузить</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- МОДАЛЬНОЕ ОКНО ДЛЯ ОБЪЕДИНЕНИЯ ПРОФИЛЕЙ -->
<div class="modal fade" id="mergeProfilesModal" tabindex="-1" aria-labelledby="mergeProfilesModalLabel"
        aria-hidden="true" th:fragment="merge-profiles-modal">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mergeProfilesModalLabel">Обнаружены дубликаты профилей</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="alert alert-warning">
                    <i class="fa-solid fa-exclamation-triangle me-2"></i>
                    Найдены существующие профили с указанными ID. Выберите действие:
                </div>

                <div id="duplicateProfiles" class="row g-3">
                    <!-- Здесь будут динамически добавлены карточки дубликатов -->
                </div>

                <hr class="my-4">

                <div class="text-center">
                    <h6>Выберите основной профиль для объединения:</h6>
                    <div class="btn-group mt-3" role="group">
                        <button type="button" class="btn btn-outline-primary" id="keepCurrentProfile">
                            <i class="fa-solid fa-check me-2"></i>Оставить текущий
                        </button>
                        <button type="button" class="btn btn-outline-secondary" id="keepDuplicateProfile">
                            <i class="fa-solid fa-arrow-right me-2"></i>Оставить найденный
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Отмена</button>
                <button type="button" class="btn btn-danger" id="confirmMergeButton" style="display: none;">
                    <i class="fa-solid fa-code-merge me-2"></i>Объединить профили
                </button>
            </div>
        </div>
    </div>
</div>
</body>
</html>
