# Active Context

This file tracks the project's current status, including recent changes, current goals, and open questions.
2025-09-03 10:32:30 - Log of updates made.

*

## Current Focus

* Анализ проекта и первоначальное (грубое) заполнение Memory Bank для создания базового контекста.

## Recent Changes

* Произведено первоначальное заполнение `productContext.md` на основе анализа структуры проекта.

## Open Questions/Issues

* Каковы конкретные требования к функционалу оверлеев? (Например, какие данные и в каком виде должны отображаться для
  разных типов игр).
* Требуется ли какая-либо аутентификация или авторизация для доступа к оверлеям?
* Как именно происходит взаимодействие и синхронизация данных с `gomafia.pro` и `polemica.app`? (API, форматы данных).
* Какие есть планы по развитию и добавлению нового функционала?

[2025-09-12 20:03:31] - Начата работа над добавлением отображения номеров игроков, проголосовавших за заголосованного
игрока в оверлеях мафии.

[2025-09-12 20:08:22] - Завершена реализация функции отображения номеров голосовавших игроков. Все изменения внесены в
код.

[2025-09-18 16:10:12] - Начата работа над изменением логики формирования названий игр в Polemica. Требуется добавить
номер стола (при наличии нескольких столов в фазе) и маркер "Финал" для phase=2.

[2025-09-18 16:15:48] - Завершена реализация новой логики формирования названий игр в Polemica. Добавлены функции
getTablesCountInPhase() и generateGameTitle(), изменена строка 154 в PolemicaService.kt. Все тесты прошли успешно.

[2025-09-19 18:57:30] - Исправлено выравнивание элементов "Voted by" в оверлеях. Изменено CSS-свойство justify-content с
center на flex-start для класса .voted-by-numbers в файле style-source.css.

[2025-09-19 19:12:55] - Добавлена черная обводка (text-shadow) для цифр в элементах voted-by для улучшения видимости,
особенно желтого цвета шерифа.

[2025-09-24 23:36:57] - Завершена реализация улучшенной системы обработки ошибок краулинга в PolemicaService. Добавлены
новые поля в модель Game для отслеживания ошибок, расширен GameRepository, реализована детальная обработка различных
типов ошибок с автоматическим восстановлением.

[2025-09-25 16:02:55] - Исправлена проблема с миграцией базы данных. Изменены поля crawlFailureCount на nullable (Int?)
для совместимости с существующими записями в БД. Обновлен код для корректной работы с nullable значениями.
